using System.Collections;
using Area51.SDK;
using MelonLoader;
using UnityEngine;

namespace Area51.Module.World.World_Hacks.Area51Engine
{
	internal class TriggerExploitFinder : BaseModule
	{
		public TriggerExploitFinder()
			: base("Trigger\n Exploit Finder", "Spams Every Trigger Object In The World", Main.Instance.udonexploitbutton, null, isToggle: true, save: true)
		{
		}

		public override void OnEnable()
		{
			MelonCoroutines.Start(TriggerFinder());
		}

		public override void OnDisable()
		{
			MelonCoroutines.Stop(TriggerFinder());
		}

		private IEnumerator TriggerFinder()
		{
			while (toggled)
			{
				for (int i = 0; i < PlayerWrapper.GetAllPlayers().Length; i++)
				{
					if (PlayerWrapper.GetAllPlayers()[i].GetAPIUser().id == PlayerWrapper.LocalPlayer.GetAPIUser().id)
					{
						continue;
					}
					for (int ii = 0; ii < WorldWrapper.vrc_Triggers.Length; ii++)
					{
						string text = WorldWrapper.vrc_Triggers[ii].name;
						for (int j = 0; j < text.Length; j++)
						{
							string text2 = text[j].ToString();
							UdonExploitManager.trigersend(text2);
							LogHandler.Log(LogHandler.Colors.Green, "[Exploit Finder] -> EventName: " + text2 + " | Object Name: " + WorldWrapper.vrc_Triggers[i].gameObject.name + " | Status: Sent!");
						}
						yield return new WaitForSeconds(0.25f);
					}
				}
				yield return new WaitForSeconds(0.25f);
			}
		}
	}
}
